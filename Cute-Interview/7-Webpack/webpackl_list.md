
## 一、Webpack 是什么，有什么用？

官方概念：打包所有资源文件；   
核心概念：`Webpack` 是一个现代 JavaScript 应用程序的**静态模块打包器**，它将应用程序中所有需要的所有模块打包成一个或多个 bundle；   


## 二、Webpack 的 loader 和 plugin 是什么，有什么用？

### 1. loader
`loader` 用于加载某些资源文件，描述了 Webpack 如何处理非 JavaScript 的文件。    
因为 Webpack 本身只能打包 `commonjs` 规范的 js 文件，对于其他资源（图片/css/.jsx/ts等等）是无法加载的。    
这里就需要使用对应的 loader 将资源转化成 Webpack 可以加载的形式。  

常用的 loader：   
* `css-loader`：将所有 `require` 的 css 文件，输出文件内容；   
* `style-loader` ：将所有 css 文件内容输出到页面的 `style` 标签；   

### 2. plugin
`plugin` 用于拓展 Webpack 的功能，让 Webpack  拥有更多文件处理功能。   

常用的 plugin：   
* `CommonsChunkPlugin`：创建一个公用的 chunk，常用于将第三方 lib 抽取成公用js；   

### 3. 总结

`loader` 用于加载待打包的资源，`plugin` 用于扩展 Webpack。   

## 三、Webpack 几个核心概念

* `entry`: 入口，Webpack 构建第一步从 `entry` 开始；
* `module`: 模块，在 Webpack 中一个模块对应一个文件。Webpack 会从 `entry` 开始，递归找出所有依赖的模块；
* `chunk`： 代码块，一个 `chunk` 由多个模块组合而成，用于代码合并与分割；
* `loader`: 模块转换器，用于将模块的原内容按照需求转换成新内容；
* `plugin`: 拓展插件，在 Webpack 构建流程中的特定时机会广播对应的事件，插件可以监听这些事件的发生，在特定的时机做对应的事情；

## 四、Webpack 执行流程

1. 初始化参数 --> 开始编译 
2. 开始编译 -->确定入口 
3. 确定入口 --> 编译模块
4. 编译模块 --> 完成编译模块
5. 完成编译模块 --> 输出资源
6. 输出资源 --> 输出完成

详细流程介绍：

1. **初始化参数**：从配置文件(默认 `webpack.config.js` )和 `shell` 语句中读取与合并参数，得出最终的参数；
2. **开始编译(compile)**：用上一步得到的参数初始化 `Comiler` 对象，加载所有配置的插件，通过执行对象的 `run` 方法开始执行编译；
3. **确定入口**：根据配置中的 `entry` 找出所有的入口文件；
4. **编译模块**：从入口文件出发，调用所有配置的 `Loader` 对模块进行翻译,再找出该模块依赖的模块，再递归本步骤直到所有入口依赖的文件都经过处理；
5. **完成编译模块**：经过第四步之后，得到了每个模块被翻译之后的最终内容以及他们之间的依赖关系；
6. **输出资源**：根据入口和模块之间的依赖关系，组装成一个个包含多个模块的 `chunk` ，再将每个 `chunk` 转换成一个单独的文件加入输出列表中，这是可以修改输出内容的最后机会；
7. **输出完成**：在确定好输出内容后，根据配置( `webpack.config.js` && `shell` )确定输出的路径和文件名，将文件的内容写入文件系统中(fs)；

## 参考资料

1. [《超详细的Webpack原理解读》](https://segmentfault.com/a/1190000017890529)




